<project name="JavaFX" default="jfx-jar" basedir="."
         xmlns:fx="javafx:com.sun.javafx.tools.ant">
	<target name="jfx-jar">
		<echo message="Packaging JavaFX JAR"/>
		<taskdef name="jar" classname="com.sun.javafx.tools.ant.FXJar" />
		<jar 
			destfile="${ugate.deploy.dir}/${project.build.finalName}.${project.packaging}">
			<application mainClass="${ugate.main}"
				preloaderClass="${ugate.preloader}" />
			<fileset dir="${project.build.directory}/dependency"
				includes="**/*" />
			<!-- <fileset dir="${project.build.outputDirectory}" -->
			<!-- includes="**/*" /> -->
		     <fileset dir="${project.build.directory}"> 
				<include name="${project.build.finalName}.${project.packaging}"/> 
		     </fileset>
			<manifest>
				<attribute name="JavaFX-Class-Path" value="." />
			</manifest>
		</jar>
		<echo message="Packaged JavaFX JAR: ${ugate.deploy.dir}/${project.build.finalName}.${project.packaging}"/>
	</target>
    <target name="jfx-native-bundle">
    	<echo message="Packaging Native Bundles (user.dir = ^${user.dir})"/>
		<taskdef name="jfxdeploy" classname="com.sun.javafx.tools.ant.DeployFXTask"
			classpath="^${maven.plugin.classpath}" />
<!-- 		<taskdef name="jfxdeploy" classname="com.sun.javafx.tools.ant.DeployFXTask" -->
<!-- 			classpathref="maven.plugin.classpath" /> -->
		<jfxdeploy width="900" height="800" nativeBundles="all"
			outdir="${ugate.deploy.dir}" outfile="${project.artifactId}">
<!-- 			<platform basedir="${java.home}" /> -->
<!-- 			<platform> -->
<!-- 				<property name="user.dir" value="^${ugate.deploy.dir}" /> -->
<!-- 				<jvmarg value="-Duser.dir=^${ugate.deploy.dir}" /> -->
<!-- 			</platform> -->
			<info title="${project.name}" vendor="${project.artifactId}">
<!--				<icon href="default.png" /> -->
			</info>
			<preferences shortcut="true" />
			<application name="${project.artifactId}" mainClass="${ugate.main}" />
			<resources>
				<fileset dir="${ugate.deploy.dir}" includes="*.jar" />
			</resources>
		</jfxdeploy>
    	<echo message="Packaged Native Bundles: ${ugate.deploy.dir}"/>
    </target>
</project>