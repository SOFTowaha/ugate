<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html lang="en" xmlns:wicket="http://wicket.apache.org">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta charset="UTF-8"/>
		<meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
		<meta http-equiv="EXPIRES" content="Mon, 01 Jan 2000 00:00:01 GMT" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<title wicket:id="title">Label Goes Here</title>
		<meta name="description" content="UGate Mobile Interface"/>
		<meta name="keywords" content="ugate, ugate mobile"/>
		<meta name="author" content=""/>
		<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
		<link rel="icon" href="logo16x16.png"/>
		<link rel="apple-touch-icon" size="144x144" href="logo128x128.png"/>
		<link rel="apple-touch-icon" size="114x114" href="logo128x128.png"/>
		<link rel="apple-touch-icon" size="72x72"   href="logo64x64.png"/>
		<link rel="apple-touch-icon" size="57x57"   href="logo64x64.png"/>
		<link rel="apple-touch-icon" href="logo64x64.png"/>
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script type="text/javascript">
			$(document).bind("mobileinit", function() {
				$.mobile.loader.prototype.options.textVisible = true;
				//$.mobile.ajaxEnabled = false;
				$.mobile.loadingMessage = "Please wait";
			});
			$(document).bind("pagebeforeload", function() {
				var msgo = $('#feedbackMessage');
				var msg = msgo ? msgo.html() : null;
				$.mobile.loadingMessage = msg ? msg : 'Loading...';
			});
			$(document).bind("pageloadfailed", function(event, data) {
				// show error content from HTTP 500 error page
				var msg = $(data.xhr.responseText).find("#errorContent").html();
				$.mobile.pageLoadErrorMessage = msg ? msg : data.errorThrown;
			});
			var ws;
			$(document).ready(function() {
				// http://jquerymobile.com/test/docs/api/methods.html
				var url = $.mobile.path.parseUrl(window.location.href);
				ws = new WebSocket("ws://" + url.host + "/DefaultWebSocket");
				ws.onopen = function(event) {
				}
				ws.onmessage = function(event) {
					// cycle 
					try {
						alert('here');
						var json = jQuery.parseJSON(event.data);
						if (json.remoteNodeId) {
							var rnId = $('#remoteNodeId').val();
							alert(json.remoteNodeId + " === " + rnId);
							if (json.remoteNodeId === rnId.toString()) {
								refreshPage();
							}
						}
						//var json = jQuery.parseJSON(event.data);
						//json.formId
						//var $textarea = $('#messages');
						//$textarea.val($textarea.val() + event.data + "\n");
						//alert("WebSocket Message: " + event.data);
					} catch (e) {
						alert("Unable to update UI (error: " + e + ") with data from\n\n" + event.data);
						refreshPage();
					}
				}
				ws.onclose = function(event) {
				}
			});
			function refreshPage() {
				$.mobile.changePage(window.location.href, {
					allowSamePageTransition : true,
					transition : 'none',
					showLoadMsg : false,
					reloadPage : true
				});
			}
		</script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	</head>
	<body>
		<div data-role="page" id="mainPage" data-title="UGate Mobile" data-theme="a" data-swatch="a" data-dom-cache="false">
			<div class="ui-header ui-bar-a" data-swatch="a" data-theme="a"
				data-form="ui-bar-a" data-role="header" role="banner" data-position="fixed">
				<a class="ui-btn-left ui-btn ui-btn-icon-notext ui-btn-corner-all ui-shadow ui-btn-up-a"
					data-iconpos="notext" data-theme="a" data-role="button"
					data-icon="home" title=" Home " href="/">
					<span class="ui-btn-inner ui-btn-corner-all">
						<span class="ui-btn-text" wicket:id="home">Label Goes Here</span>
						<span data-form="ui-icon" class="ui-icon ui-icon-home ui-icon-shadow">&nbsp;</span>
				</span>
				</a>
				<h1 class="ui-title" tabindex="0" role="heading" aria-level="1" wicket:id="header">Label Goes Here</h1>
<!-- 				<a -->
<!-- 					class="ui-btn-right ui-btn ui-btn-icon-notext ui-btn-corner-all ui-shadow ui-btn-up-a" -->
<!-- 					data-iconpos="notext" data-theme="a" data-role="button" -->
<!-- 					data-icon="grid" title=" Navigation "> <span -->
<!-- 					class="ui-btn-inner ui-btn-corner-all"> <span -->
<!-- 						class="ui-btn-text"> Navigation </span> <span data-form="ui-icon" -->
<!-- 						class="ui-icon ui-icon-grid ui-icon-shadow"></span> -->
<!-- 				</span> -->
<!-- 				</a> -->
				<a data-theme="b" data-iconpos="right" data-icon="arrow-r" href="/?logout=1" 
					class="ui-btn-right ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-right ui-btn-up-b" 
					data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span"
					data-transition="flip">
					<span class="ui-btn-inner ui-btn-corner-all">
						<span class="ui-btn-text" wicket:id="logInOut">Label Goes Here</span>
						<span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
					</span>
				</a>
			</div>
			<div data-role="content">
				<wicket:child />
			</div>
			<div data-role="footer" data-theme="d" data-position="fixed">
				<h4 wicket:id="footer">Label Goes Here</h4>
			</div>
		</div>
		<input wicket:id="remoteNodeId" id="remoteNodeId" type="hidden" />
	</body>
</html>